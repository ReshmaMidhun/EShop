<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eshop</title>
    <link rel="stylesheet" href="CSS/style.css">
    <!--Box Icons-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    
    <!--Box Icons-->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="CSS/admin-style.css">

    <style>
    #toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
      z-index: 9999;
    }

    .toast {
        background: #4CAF50; /* success = green */
        color: white;
        padding: 6px 12px;
        margin-bottom: 8px;
        margin-right: 20px;
        border-radius: 4px;
        font-size: 14px;         
        min-width: 120px;        
        max-width: 250px; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        opacity: 0;
        transform: translateX(120%);
        transition: all 0.5s ease;
    }

    .toast.show {
        opacity: 1;
        transform: translateX(0);
    }

    </style>
</head>
<body>

    <section id="admin-section">
        <div class="div1">
            <h2>ADMIN PANEL</h2>
            <ul id="lists">
                <li><a href="addProduct.html"><i class="fa-solid fa-circle-plus"></i>Add Product</a></i></li>
                <li><a href="listProduct.html"><i class="fa-solid fa-bag-shopping"></i>List Products</a></i></li>
                <li><a href="notifications.html"><i class="fa-solid fa-receipt"></i> Notifications <span id="msgCount">(0)</span></a></li>
                <li><a href="adminOrders.html"><i class="fa-solid fa-bag-shopping"></i> Orders</a></li>

            </ul>
        </div>
        <div class="div2"> 
            <div class="top-bar">
                <button id="logOut-btn">
                    <i class="fa-solid fa-right-from-bracket"></i>Logout
                </button>
            </div>
            <div class="container">
                <h1>Add Product</h1>
                <form id="addProductForm" method="POST">

                    <!-- Upload 4 images -->
                     <div class="images-inputs">
                        <input type="file" name="images" accept="/image/*" required>
                        <input type="file" name="images" accept="/image/*">
                        <input type="file" name="images" accept="/image/*">
                        <input type="file" name="images" accept="/image/*">
                     </div>

                     <!-- Product name -->
                      <div>
                            <label for="name">Product Name</label>
                            <input type="text" name="name" id="name" placeholder="Enter Product Name" required>
                     </div>

                      <!-- Product description -->
                       <div>
                            <label for="description">Product Description</label>
                            <textarea name="description" id="description" rows="4" placeholder="Enter product Description" required></textarea>
                       </div>

                       <!-- Category -->
                        <!-- Category -->
                        <div>
                            <label for="category">Category</label>
                            <select name="category" id="category" required>
                                <option value="">--SELECT CATEGORY--</option>
                                <option value="1">All</option>
                                <option value="2">Men</option>
                                <option value="3">Women</option>
                                <option value="4">Kids</option>
                            </select>
                        </div>

                        <!-- Sub Category -->
                        <div>
                            <label for="subcategory">Sub Category</label>
                            <select name="subcategory" id="subcategory" required>
                                <option value="">--SELECT SUB CATEGORY--</option>
                            </select>
                        </div>

                        <!-- Size -->
                        <div class="size-stock">
                            <label for="stock_S">S:</label>
                            <input type="number" name="stock_S" id="stock_S" placeholder="Stock for S" min="0">

                            <label for="stock_M">M:</label>
                            <input type="number" name="stock_M" id="stock_M" placeholder="Stock for M" min="0">

                            <label for="stock_L">L:</label>
                            <input type="number" name="stock_L" id="stock_L" placeholder="Stock for L" min="0">

                            <label for="stock_XL">XL:</label>
                            <input type="number" name="stock_XL" id="stock_XL" placeholder="Stock for XL" min="0">
                            </div>




                        <!-- Price -->
                         <div>
                            <label for="price">Price $</label>
                            <input type="number" name="price" id="price" placeholder="Enter price" required>
                         </div>

                         <!-- Stock -->
                        <!-- <div>
                            <label for="stock">Stock</label>
                            <input type="number" name="stock" id="stock" placeholder="Enter Stock Quantity" required>
                         </div> -->

                         <!-- Add Button -->
                          <button type="submit"> Add Product</button>

                </form>
            </div>
        </div>
    </section>

    <div id="toast-container"></div>


<script src="JS/adminMain.js"></script>     
<script>

    const subcategories = {
      1:[],
      2: ["T-Shirt", "Jeans", "Shirt","Pant", "Jackets"],
      3: ["Saree", "Kurti", "Top", "Jeans","Blazer"],
      4: ["Frock", "Shorts", "T-Shirt","Combo Sets", "Shirt"]
    };

    const categorySelect = document.getElementById("category");
    const subcategorySelect = document.getElementById("subcategory");

    categorySelect.addEventListener("change", function () {
      const categoryValue = this.value;
      subcategorySelect.innerHTML = "<option value=''>--SELECT SUB CATEGORY--</option>";

      if (subcategories[categoryValue]) {
        subcategories[categoryValue].forEach((sub, index) => {
          const option = document.createElement("option");
          option.value = index + 1; // You can set actual IDs here if needed
          option.textContent = sub;
          subcategorySelect.appendChild(option);
        });
      }
    });
    // Logout button
    updateNotificationCount();
    document.getElementById("logOut-btn").addEventListener("click", () => {
        window.location.href = "login.html";
    });

         // Form submission
        const form = document.getElementById("addProductForm");
        form.addEventListener("submit", e => {
            e.preventDefault();
            const formData = new FormData(form);
           for (let pair of formData.entries()) {
    console.log(pair[0], pair[1]);
}

            
                fetch("/addProduct" , {
                method: "POST",
                body: formData
            })
            .then(res => res.json())
            .then(data => {
                 console.log(data.message);
                 showToast(data.message);
                  form.reset();
            })
                   
            .catch(err  => {  
                console.error("Error:", err);
                alert("Something went wrong!");
                
            });

        });

        function showToast(message, type = "success") {
            const container = document.getElementById("toast-container");
            const toast = document.createElement("div");

            toast.classList.add("toast", "show");
            toast.textContent = message;

            // Different colors based on type
            if (type === "error") toast.style.background = "#f44336"; // red
            if (type === "info") toast.style.background = "#2196F3"; // blue
            if (type === "warning") toast.style.background = "#ff9800"; // orange

            container.appendChild(toast);

            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove("show");
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

</script>

</body>
</html>